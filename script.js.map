{"version":3,"file":"script.js","mappings":"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","sources":["webpack://online_book_store/./src/js/variables.js","webpack://online_book_store/./src/js/slider.js","webpack://online_book_store/./src/js/books.js","webpack://online_book_store/./src/js/index.js"],"sourcesContent":["\r\nconst bannerButtons = document.querySelectorAll('.main__banner__nav__button');\r\nconst banner = document.querySelector(`.main__banner__svg`);\r\n\r\nconst banners = [\r\n    {\r\n        src: `/src/svg/main__banner__svg_1.svg`,\r\n        alt: `BLACK FRIDAY SALE: up to 60%`\r\n    },\r\n    {\r\n        src: `/src/svg/main__banner__svg_2.svg`,\r\n        alt: `Top 10 books for entrepreneurs`\r\n    },\r\n    {\r\n        src: `/src/svg/main__banner__svg_3.svg`,\r\n        alt: `Check out our cozy books selection`\r\n    },\r\n];\r\n\r\nlet previousButton = document.querySelector(`.main__banner__nav__button_selected`);\r\n\r\n\r\n\r\nlet API_KEY;\r\nlet startIndex = 0;\r\nlet subject = `Architecture`;\r\n\r\nconst books = document.querySelector(`.main__books__content`);\r\nconst categories = document.querySelectorAll(`.main__books__ul__li`);\r\nconst counter = document.querySelector(`.header__nav__button__cart__counter`);\r\n\r\nlet cart = [];\r\n\r\n\r\nexport { bannerButtons, banner, banners, previousButton, API_KEY, startIndex, subject, books, categories, counter, cart }\r\n","import { banner, banners, previousButton } from './variables'\r\n\r\nfunction changeButtons(button) {\r\n    previousButton.classList.remove(`main__banner__nav__button_selected`);\r\n    button.classList.add(`main__banner__nav__button_selected`);\r\n\r\n    previousButton = button;\r\n}\r\n\r\nfunction changeBanner(id) {\r\n    banner.style.opacity = 0;\r\n\r\n    setTimeout(() => {\r\n        banner.src = banners[id].src;\r\n        banner.alt = banners[id].alt;\r\n    }, 500)\r\n    \r\n    banner.onload = function() {\r\n        banner.style.opacity = 1\r\n    }\r\n}\r\n\r\nexport {changeButtons, changeBanner}\r\n\r\n","import { API_KEY, startIndex, subject, books, categories, counter, cart } from './variables'\r\n\r\nfunction createNode(parentNode, tag, className, innerHTML) {\r\n    const node = document.createElement(tag);\r\n    node.className = className;\r\n    node.innerHTML = innerHTML;\r\n    parentNode.append(node);\r\n\r\n    return node\r\n}\r\n\r\nfunction useRequest(subject, key, startIndex) {\r\n    fetch(`https://www.googleapis.com/books/v1/volumes?q=\"subject:${subject}\"&key=${key}&printType=books&startIndex=${startIndex}&maxResults=6&langRestrict=en`)\r\n    .then(response => response.json())\r\n    .then((json) => {\r\n        displayResult(json);\r\n        console.log(json)\r\n    })\r\n}\r\n\r\nfunction getLocaLStorageData() {\r\n    if (JSON.parse(localStorage.getItem(`cart`)).length > 0) {\r\n        cart = JSON.parse(localStorage.getItem(`cart`));\r\n        switchCounter();\r\n    }\r\n}\r\n\r\nfunction switchCounter() {\r\n    counter.textContent = cart.length;\r\n    counter.style.opacity = cart.length > 0 ? 1 : 0;\r\n}\r\n\r\ncategories.forEach((category) => {\r\n    category.addEventListener(`click`, () => {\r\n        startIndex = 0;\r\n        subject = category.id;\r\n        const previousCategory = document.querySelector(`.main__books__ul__li_selected`);\r\n        previousCategory.classList.remove(`main__books__ul__li_selected`);\r\n        category.classList.add(`main__books__ul__li_selected`);\r\n        books.innerHTML = ``;\r\n        useRequest(subject, API_KEY, startIndex);\r\n    });\r\n});\r\n\r\n\r\nfunction displayStars(rating) {\r\n    let int = Math.floor(rating);\r\n    let fract = Math.floor((rating - Math.floor(rating))*100);\r\n\r\n    const stars = document.createElement(`div`);\r\n\r\n    function displayStar(fill) {\r\n       createNode(stars, `div`, `star`, `\r\n        <svg width=\"12\" height=\"11\" viewBox=\"0 0 12 11\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <defs>\r\n                <linearGradient id=\"Gradient1\" x1=\"0\" x2=\"1\" y1=\"0\" y2=\"0\">\r\n                    <stop offset=\"${fract}%\" stop-color=\"#F2C94C\" />\r\n                    <stop offset=\"${fract}%\" stop-color=\"#EEEDF5\" />\r\n                </linearGradient>\r\n            </defs>\r\n            <path d=\"M6 0L7.80568 3.5147L11.7063 4.1459L8.92165 6.9493L9.52671 10.8541L6 9.072L2.47329 10.8541L3.07835 6.9493L0.293661 4.1459L4.19432 3.5147L6 0Z\" fill=\"${fill}\" />\r\n        </svg>`\r\n        );\r\n    }\r\n\r\n    for (let i = 1; i < 6; i++) {\r\n        displayStar(`${i <= int ? `#F2C94C` : i === int + 1 ? `url(#Gradient1)` : `#EEEDF5`}`)\r\n    }\r\n\r\n    return stars.innerHTML\r\n}\r\n\r\n\r\nfunction displayResult(apiData) {\r\n    startIndex > 0 ? document.querySelector(`.main__button`).remove() : ``;\r\n\r\n    apiData.items.forEach((item) => {\r\n        function setProperty(property) {\r\n            switch(property) {\r\n                case `imageLinks`:\r\n                    return `<img src=\"${item.volumeInfo.hasOwnProperty(property) ? item.volumeInfo.imageLinks.thumbnail : `/src/svg/no-image.svg`}\" class=\"img book__img\">`\r\n                case `authors`:\r\n                    return item.volumeInfo.hasOwnProperty(property) ? `<p class=\"book__author\">${item.volumeInfo.authors.join(`, `)}</p>` : ``\r\n                case `averageRating`:\r\n                    return item.volumeInfo.hasOwnProperty(property) ? `<div class=\"book__rating\"><div class=\"book__rating__stars\">${displayStars(item.volumeInfo.averageRating)}</div> ${item.volumeInfo.ratingsCount} reviews</div>` : ``\r\n                case `description`:\r\n                    return item.volumeInfo.hasOwnProperty(property) ? `<p class=\"book__description\">${item.volumeInfo.description}</p>` : ``\r\n                case `retailPrice`:\r\n                    return item.saleInfo.hasOwnProperty(property) ? `<p class=\"book__price\">${item.saleInfo.retailPrice.amount} ${item.saleInfo.retailPrice.currencyCode}</p>` : ``\r\n                case `buttonClass`:\r\n                    return cart.includes(item.id) ? `book__button_selected` : `book__button_buy`\r\n                case `buttonText`:\r\n                    return cart.includes(item.id) ? `in the cart` : `buy now`\r\n                }\r\n        }\r\n\r\n        const book = createNode(books, `div`, `main__books__content__book`, setProperty(`imageLinks`));\r\n        const info = createNode(book, `div`, `book__info`, `\r\n            <div class=\"book__info__main\">\r\n                ${setProperty(`authors`)}\r\n                <p class=\"book__title\">${item.volumeInfo.title}</p>\r\n                ${setProperty(`averageRating`)}\r\n            </div>\r\n            ${setProperty(`description`)}\r\n            ${setProperty(`retailPrice`)}`);\r\n\r\n        const button = createNode(info, `button`, `book__button ${setProperty(`buttonClass`)}`, setProperty(`buttonText`));\r\n        button.addEventListener(`click`, () => {\r\n            button.className = cart.includes(item.id) ? `book__button book__button_buy` : `book__button book__button_selected`;\r\n            button.innerHTML = cart.includes(item.id) ?  `buy now` : `in the cart`;\r\n            cart.includes(item.id) ? cart.splice(cart.indexOf(item.id), 1) : cart.push(item.id);\r\n\r\n            localStorage.setItem(`cart`, JSON.stringify(cart));\r\n            switchCounter();\r\n        });        \r\n    });\r\n\r\n    const loadButton = createNode(books, `button`, `main__button`, `load more`);\r\n    loadButton.addEventListener(`click`, () => {\r\n        startIndex += 6;\r\n        useRequest(subject, API_KEY, startIndex);\r\n    });\r\n}\r\n\r\nexport { getLocaLStorageData, useRequest, API_KEY }","import '../scss/styles.scss';\r\n\r\nimport { bannerButtons, API_KEY }  from './variables.js';\r\nimport { changeButtons, changeBanner }  from './slider.js';\r\nimport { getLocaLStorageData, useRequest} from './books.js';\r\n\r\n\r\ndocument.addEventListener(`DOMContentLoaded`, () => {\r\n    let id = 1;\r\n    let timerId = setInterval(() => {\r\n        id = id > 2 ? 0 : id;\r\n\r\n        let button = document.getElementById(id);\r\n\r\n        changeButtons(button);\r\n        changeBanner(button.id);\r\n\r\n        id++;\r\n\r\n    }, 5000);\r\n\r\n    bannerButtons.forEach((button) => {\r\n        button.addEventListener(`click`, () => {\r\n\r\n            changeButtons(button);\r\n            changeBanner(button.id);\r\n\r\n            id = Number(button.id) + 1;\r\n        });\r\n    });\r\n\r\n    getLocaLStorageData();\r\n\r\n    let subject = `Architecture`;\r\n    let startIndex = 0;\r\n    useRequest(subject, API_KEY, startIndex);\r\n});"],"names":["bannerButtons","document","querySelectorAll","banner","querySelector","banners","src","alt","API_KEY","previousButton","startIndex","subject","books","categories","counter","cart","changeButtons","button","classList","remove","add","changeBanner","id","style","opacity","setTimeout","onload","createNode","parentNode","tag","className","innerHTML","node","createElement","append","useRequest","key","fetch","then","response","json","displayResult","console","log","switchCounter","textContent","length","apiData","items","forEach","item","setProperty","property","volumeInfo","hasOwnProperty","imageLinks","thumbnail","authors","join","rating","int","Math","floor","fract","stars","i","displayStars","averageRating","ratingsCount","description","saleInfo","retailPrice","amount","currencyCode","includes","book","info","title","addEventListener","splice","indexOf","push","localStorage","setItem","JSON","stringify","category","setInterval","getElementById","Number","parse","getItem"],"sourceRoot":""}